{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://json.schemastore.org/apbs-input.json",
  "title": "APBS input",
  "description": "Input file schema for APBS electrostatics software (https://apbs.readthedocs.io/)",
  "type": "object",
  "properties": {
    "polar": {
      "description": "Specify configuration of electrostatics (polar solvation) calculations",
      "type": "array",
      "items": {
        "$ref": "#/$defs/calculation name",
        "oneOf": [
          {
            "$ref": "#/$defs/multigrid auto"
          }
        ]
      }
    }
  },
  "required": [
    "read"
  ],
  "$defs": {
    "alias": {
      "description": "Alias for object being read. If not provided, filename will be used.",
      "type": "string"
    },
    "calculation name": {
      "description": "A name for your calculation.",
      "type": "string"
    },
    "boundary condition": {
      "description": "Boundary condition for electrostatics calculation.",
      "oneOf": [
        {
          "zero": {
            "description": "'Zero' boundary condition. Dirichlet conditions where the potential at the boundary is set to zero. This condition is not commonly used and can result in large errors if used inappropriately."
          }
        },
        {
          "single_sphere": {
            "description": "“Single Debye-Hückel” boundary condition. Dirichlet condition where the potential at the boundary is set to the values prescribed by a Debye-Hückel model for a single sphere with a point charge, dipole, and quadrupole. The sphere radius in this model is set to the radius of the biomolecule and the sphere charge, dipole, and quadrupole are set to the total moments of the protein. This condition works best when the boundary is sufficiently far from the biomolecule."
          }
        },
        {
          "multiple_sphere": {
            "description": "“Multiple Debye-Hückel” boundary condition. Dirichlet condition where the potential at the boundary is set to the values prescribed by a Debye-Hückel model for a multiple, non-interacting spheres with a point charges. The radii of the non-interacting spheres are set to the atomic radii of and the sphere charges are set to the atomic charges. This condition works better than sdh for closer boundaries but can be very slow for large biomolecules."
          }
        },
        {
          "focus": {
            "description": "“Focusing” boundary condition. Dirichlet condition where the potential at the boundary is set to the values computed by the previous (usually lower-resolution) PB calculation. This is only used in sequential focusing performed manually in mg-manual calculations. All of the boundary points should lie within the domain of the previous calculation for best accuracy; if any boundary points lie outside, their values are computed using single Debye-Hückel boundary conditions."
          }
        },
        {
          "map": {
            "description": "Specifying map allows a previously calculated potential map to be used in a new focusing calculation. A typical scenario is using the same coarse grid for multiple focusing calculations. A potential map can be written once from a coarse grid calculation, then used in subsequent runs to bypass the need to recalculate the coarse grid. See the READ keyword potential."
          }
        }
      ]
    },
    "multigrid auto": {
      "description": "Automatically configured finite difference Poisson-Boltzmann calculations. This multigrid calculation automatically sets up and performs a string of single-point PBE calculations to “focus” on a region of interest (binding site, etc.) in a system.",
      "type": "object",
      "properties": {
        "$ref": "#/$defs/boundary condition"
      }
    }
  }
}